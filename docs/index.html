<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2025ÎÖÑ Ïû¨ÏÇ∞ÏÑ∏(ÌÜ†ÏßÄ) Í≥ÑÏÇ∞</title>
  <!-- üîΩ PWA: ÌÖåÎßà/Îß§ÎãàÌéòÏä§Ìä∏/ÏïÑÏù¥ÏΩò -->
  <meta name="theme-color" content="#0b5" />
  <link rel="manifest" href="manifest.webmanifest?v=3">
  <link rel="icon" href="./icon-192-v2.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="./icon-512-v2.png" />
  <style>
    :root{
      --bg:#ffffff; --card:#f8f9fa; --text:#0b1220; --text-sub:#4b5563; --brand:#0b5; --brand-weak:#e7fff2;
      --sum-bg:#e7fff2; --input-bg:#fffbe6; --line:#ddd; --shadow:rgba(0,0,0,.08); --icon:#334155;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;font-size:14.4px;line-height:1.65;}
    body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:-1;background-image:radial-gradient(rgba(0,187,85,.08) 1px,transparent 1px);background-size:18px 18px;opacity:.14}

    /* ‚ñ∂ ÏÉÅÎã® Î∞î */
    .appbar{ position:sticky;top:0;z-index:50; backdrop-filter:saturate(140%) blur(8px); background:color-mix(in oklab,var(--bg) 90%,#000 10%); border-bottom:1px solid var(--line) }
    .appbar .row{ max-width:none; width:100%; margin:0; padding:10px 16px; display:flex; align-items:center; gap:12px; }
    .brand{display:none}
    .app-actions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-left:0; width:100%; justify-content:flex-start; }
    .icon-btn{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:6px;border:1px solid var(--line);background:var(--card);color:#000;cursor:pointer;text-decoration:none;font-size:10px;font-weight:800;white-space:nowrap}
    .icon-btn:hover{filter:brightness(1.04)}
    .icon-btn--print {background:#eaf2ff;border-color:#cfe0ff;}
    .icon-btn--realty {background:#eaf7ee;border-color:#cfe8d8;}
    .icon-btn--law {background:#fdecec;border-color:#f4c6c6;}
    .icon-btn--wetax {background:#f5eee6;border-color:#e5d9c7;}
    .icon-btn--install{background:#efe9ff;border-color:#d9ccff;}
    .ico-printer,.ico-floppy{display:inline-flex;align-items:center;justify-content:center}
    .ico-printer{width:20px;height:20px}
    .ico-floppy{width:18px;height:18px}
    .ico-printer svg,.ico-floppy svg{width:100%;height:100%}
    .ico-printer .st,.ico-floppy .st{fill:none;stroke:var(--icon);stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    .ico-floppy .fill{fill:var(--icon)}

    .wrap{max-width:880px;margin:20px auto 90px;padding:0 16px}
    .page-title{font-size:24px;font-weight:900;letter-spacing:-0.3px;margin:6px 0 6px 0;text-align:center}
    .title-note{font-size:12px;color:#d63031;text-align:center;margin:0 0 8px 0}

    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:22px;box-shadow:0 4px 12px var(--shadow);max-width:720px;margin:12px auto}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h2{font-size:14.4px;margin:0;letter-spacing:-0.2px}
    h2 .unit{font-size:9.6px;font-weight:600;margin-left:6px;vertical-align:middle;color:#4b5563}
    label{display:block;font-size:13.6px;color:#4b5563;margin-bottom:6px;letter-spacing:-0.2px}
    .note-inline{font-size:11.2px;color:#2c58ff;font-weight:600;margin-left:6px}

    input[type="text"],input.num,select{background:#fff;border:1px solid #ccc;color:#000;padding:12px 14px;border-radius:10px;outline:none;font-size:13.6px}
    input.num{text-align:right;background:var(--input-bg)}
    select{background:#fff}
    input:focus,select:focus{border-color:#9db4ff;box-shadow:0 0 0 3px rgba(44,88,255,.15)}
    #Î∂ÑÎ¶¨_Ïú†Ìòï{letter-spacing:-0.25px;padding:8px 10px;font-size:13px;line-height:1.2}

    #section-input .row3 input.num{width:60%;min-width:192px;max-width:272px;margin:0 auto;}
    .row{display:grid;grid-template-columns:1fr;gap:12px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:720px){.row3{grid-template-columns:1fr 1fr}}
    #section-input .row3, #section-input .row2{max-width:680px;margin:0 auto}

    #section-input .row3-inline{ display:flex; gap:8px; align-items:flex-end; flex-wrap:nowrap; overflow-x:auto; padding-bottom:2px; -webkit-overflow-scrolling:touch; scrollbar-width:thin; justify-content:center; text-align:center; }
    #section-input .row3-inline > div{ flex:0 0 176px; }
    #section-input .row3-inline label{ font-size:12px; margin-bottom:4px; white-space:nowrap; }
    #section-input .row3-inline input.num{ width:100%; min-width:0; max-width:none; padding:8px 10px; font-size:12.5px; border-radius:10px; text-align:center; }
    @media (max-width:480px){
      #section-input .row3-inline > div{ flex-basis:144px; }
      #section-input .row3-inline input.num{ font-size:12px; padding:7px 9px; }
      #section-input .row3-inline label{ font-size:11.5px; }
    }

    .btn{display:inline-flex;gap:6px;align-items:center;padding:12px 18px;background:var(--brand);border:1px solid var(--brand);color:#fff;border-radius:12px;cursor:pointer;font-weight:700;font-size:15.2px;text-decoration:none}
    .btn:hover{filter:brightness(1.05)}
    .btn-calc{font-size:12px;padding:8px 13px !important}
    .actions{ text-align:center; margin-bottom:14px; }

    .inline-sum{ display:flex; justify-content:center; margin:8px 0 0; width:100%; }
    .sum-chip{ display:inline-flex; align-items:center; gap:8px; background:var(--sum-bg); border:1px solid #b8f3d1; padding:8px 12px; border-radius:999px; box-shadow:0 2px 6px rgba(0,187,85,.08); width:50%; justify-content:center; text-align:center; flex-direction:column; }
    .sum-chip .line{ display:inline-flex; align-items:center; gap:8px; }
    .sum-chip .icon{ width:20px; height:20px; display:inline-flex; align-items:center; justify-content:center; background:#fff; border:1px solid #b8f3d1; border-radius:50%; }
    .sum-chip .label{ font-size:12.5px; color:var(--text-sub); font-weight:800; letter-spacing:-0.2px; }
    .sum-chip .value{ font-size:13.6px; font-weight:900; }

    .sum-box{background:#ffffff;border:1px solid #b8f3d1;border-radius:12px;padding:14px 16px;margin:10px auto 12px auto;box-shadow:0 4px 10px rgba(0,187,85,.08);display:grid;grid-template-columns:1fr;gap:10px;text-align:center;max-width:520px}
    .sum-box .label{font-size:13.6px;color:#000;font-weight:700}
    .sum-box .value{font-size:14.4px;font-weight:900}

    /* ‚úÖ Î≥ÄÍ≤Ω: ÏµúÏ¢ÖÏÑ∏Ïï°(sum-box half) Ï¢åÏö∞Ìè≠ÏùÑ ÌÅ∞Î∞ïÏä§(Ïπ¥Îìú)ÏôÄ ÎèôÏùºÌïòÍ≤å */
    #section-result .sum-box.half{width:100%;max-width:unset;margin:10px 0;text-align:center}
    #section-result .sum-box{justify-items:center;align-items:center;text-align:center}
    @media (max-width:720px){#section-result .sum-box.half{max-width:100%}}

    .table{width:100%;border-collapse:collapse;margin:8px auto 0;font-size:12.8px;table-layout:fixed;max-width:640px}
    .table th,.table td{padding:12px;border-bottom:1px solid var(--line);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .table thead th:first-child{text-align:center}
    .table td.mono{font-weight:800;font-size:13.6px;text-align:right}
    .th-center{text-align:center !important}
    tfoot tr{background:var(--sum-bg);font-weight:900}
    tfoot th.big{font-size:15.2px;text-align:center}
    .sum-amount{font-size:14.4px !important;font-weight:900 !important;line-height:1.2;text-align:right}

    #section-result{ text-align:center; }
    .result-table{max-width:420px; width:auto; display:inline-table; table-layout:auto; margin:12px auto 0;}
    .result-table th,.result-table td{padding:8px 10px;}

    .break-wrap{max-width:720px;margin:10px auto 0}
    .info-table td{white-space:normal}
    .city-apply{display:inline-flex;align-items:center;gap:6px;font-size:11px;margin-left:6px;color:#2c58ff}
    .city-apply input{accent-color:var(--brand)}

    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:120px;z-index:60;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;font-size:14px;opacity:0;pointer-events:none;transition:opacity .25s,transform .25s}
    .toast.show{opacity:1;pointer-events:auto}

    .faq{max-width:720px;margin:22px auto}
    .faq h2{font-size:16px;margin:8px 0 10px;text-align:center;cursor:pointer}
    .faq details{background:var(--card);border:1px solid var(--line);border-radius:10px;padding:12px 14px;margin:8px 0;box-shadow:0 2px 8px var(--shadow)}
    .faq summary{cursor:pointer;font-weight:800}
    .faq p{margin:10px 0 0}
    .faq[data-collapsed="1"] details{display:none}

    /* ÎÇ®ÏïÑ ÏûàÏñ¥ÎèÑ Î¨¥Ìï¥Ìïú ÏïàÎÇ¥Î¨∏ Ïä§ÌÉÄÏùº(ÌòÑÏû¨ ÏÇ¨Ïö© Ïïà Ìï®) */
    .note-red{font-size:11px;color:#d63031;font-weight:700;margin-top:4px}
    .note-red.center{text-align:center}

    @media print{
      @page{size:A4 portrait;margin:8mm}
      html,body{height:auto}
      *{-webkit-print-color-adjust:exact;print-color-adjust:exact}
      body{font-size:10.5pt;line-height:1.45}
      .appbar{display:none !important}
      .wrap{width:180mm; margin:0 auto; padding:0}
      .page-title{font-size:14pt;margin:2mm 0 4mm;text-align:center}
      .card{box-shadow:none;padding:8px;margin:0 auto;border-color:#ddd;max-width:170mm}
      .row3,.row2{gap:6px}
      .table{max-width:160mm}
      .table th,.table td{padding:6px;font-size:10.5pt}
      .sum-box{margin:4px auto;padding:8px;max-width:80mm;text-align:center}
      .result-table{max-width:120mm; width:auto; display:inline-table; table-layout:auto; margin:6px auto 0;}
      .break-wrap{max-width:170mm}
      .faq{display:none !important}
      .toast{display:none !important}
}
  </style>
</head>
<body>
  <header class="appbar">
    <div class="row">
      <div class="brand"></div>
      <div class="app-actions">
        <!-- 1) Ïù∏ÏáÑ/Ï†ÄÏû• -->
        <a class="icon-btn lg icon-btn--print" href="javascript:void(0)" onclick="openPrint()" title="Ïù∏ÏáÑ / PDF Ï†ÄÏû•" aria-label="Ïù∏ÏáÑ ÎØ∏Î¶¨Î≥¥Í∏∞">
          <span class="ico-printer" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="st" d="M7 8V4h10v4M6 17H5a 2 2 0 0 1-2-2v-3a 2 2 0 0 1 2-2h14a 2 2 0 0 1 2 2v3a 2 2 0 0 1 2 2h-1M7 14h10v6H7zM17 11h.01"/></svg>
          </span>
          <span class="ico-floppy" aria-hidden="true" style="margin-left:2px">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="2" class="st"/><rect x="6" y="5.5" width="9" height="6" class="st"/><rect x="17" y="6.5" width="3" height="3" class="fill"/><line x1="6" y1="16.5" x2="18" y2="16.5" class="st"/></svg>
          </span>
        </a>
        <!-- 2) Ï£ºÌÉùÍ≥µÏãúÍ∞ÄÍ≤© -->
        <a class="icon-btn lg icon-btn--realty" href="javascript:void(0)" onclick="openLookupNew()" title="Ï£ºÌÉùÍ≥µÏãúÍ∞ÄÍ≤©" aria-label="Ï£ºÌÉùÍ≥µÏãúÍ∞ÄÍ≤©">
          <span aria-hidden="true">üîç</span> Ï£ºÌÉùÍ≥µÏãúÍ∞ÄÍ≤©
        </a>
        <!-- 3) ÏßÄÎ∞©ÏÑ∏Î≤ï -->
        <a class="icon-btn lg icon-btn--law" target="_blank" href="https://www.law.go.kr/LSW/lsSc.do?query=%EC%A7%80%EB%B0%A9%EC%84%B8%EB%B2%95" rel="noopener">
          <span aria-hidden="true">üîç</span> ÏßÄÎ∞©ÏÑ∏Î≤ï
        </a>
        <!-- 4) ÏúÑÌÉùÏä§ -->
        <a class="icon-btn lg icon-btn--wetax" target="_blank" href="https://www.wetax.go.kr/etq/etp/epi/E070101M01.do" rel="noopener" title="ÏúÑÌÉùÏä§ ÏßÄÎ∞©ÏÑ∏ ÎÇ©Î∂Ä" aria-label="ÏúÑÌÉùÏä§">
          <span aria-hidden="true">üßæ</span> ÏúÑÌÉùÏä§
        </a>
        <!-- 5) Ïï± ÏÑ§Ïπò -->
        <button id="install" type="button" class="icon-btn lg icon-btn--install">Ïï± ÏÑ§Ïπò</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <!-- ÌÅ∞ Ï†úÎ™© -->
    <div class="page-title">2025ÎÖÑ Ïû¨ÏÇ∞ÏÑ∏ Í≥ÑÏÇ∞(ÌÜ†ÏßÄ)</div>
    <!-- Îπ®Í∞Ñ ÏïàÎÇ¥Î¨∏ -->
    <p class="title-note">‚Äª ÌÜ†ÏßÄ ÏÑ∏Î∂ÄÎã¥ÏÉÅÌïú Í≥ÑÏÇ∞ Î∂àÍ∞Ä</p>

    <div class="grid">
      <!-- ÏûÖÎ†• -->
      <div class="card" id="section-input">
        <div class="header-row">
          <h2>1. ÌÜ†ÏßÄ Í≥ºÏÑ∏ÌëúÏ§Ä ÏûÖÎ†•<span class="unit">(Îã®ÏúÑ: Ïõê)</span></h2>
        </div>

        <!-- Ïà´Ïûê ÏûÖÎ†• 3Ïπ∏ -->
        <div class="row3-inline">
          <div>
            <label>Ï¢ÖÌï©Ìï©ÏÇ∞ Í≥ºÏÑ∏ÌëúÏ§Ä</label>
            <input id="Í≥ºÌëú_Ï¢ÖÌï©" class="num" type="text" inputmode="numeric" placeholder="Ïà´ÏûêÎßå ÏûÖÎ†•">
          </div>
          <div>
            <label>Î≥ÑÎèÑÌï©ÏÇ∞ Í≥ºÏÑ∏ÌëúÏ§Ä</label>
            <input id="Í≥ºÌëú_Î≥ÑÎèÑ" class="num" type="text" inputmode="numeric" placeholder="Ïà´ÏûêÎßå ÏûÖÎ†•">
          </div>
          <div>
            <label>Î∂ÑÎ¶¨Í≥ºÏÑ∏ Í≥ºÏÑ∏ÌëúÏ§Ä</label>
            <input id="Í≥ºÌëú_Î∂ÑÎ¶¨" class="num" type="text" inputmode="numeric" placeholder="Ïà´ÏûêÎßå ÏûÖÎ†•">
          </div>
        </div>

        <div class="row2" style="margin-top:8px">
          <div>
            <label>Î∂ÑÎ¶¨Í≥ºÏÑ∏ Ïú†Ìòï ÏÑ†ÌÉù(111Ï°∞1Ìï≠1Ìò∏Îã§Î™©)</label>
            <select id="Î∂ÑÎ¶¨_Ïú†Ìòï">
              <option value="" selected disabled>ÏÑ†ÌÉù</option>
              <option value="farm">Ï†Ñ¬∑Îãµ¬∑Í≥ºÏàòÏõê¬∑Î™©Ïû•Ïö©ÏßÄ¬∑Îèô Ìò∏ ÎÇòÎ™© ÏûÑÏïº (0.07%)</option>
              <option value="golf">Í≥®ÌîÑÏû• Î∞è Í≥†Í∏âÏò§ÎùΩÏû•Ïö© ÌÜ†ÏßÄ (4%)</option>
              <option value="etc">Í∑∏ Î∞ñÏùò ÌÜ†ÏßÄ (0.2%)</option>
            </select>
          </div>
          <div></div>
        </div>

        <div class="actions" style="margin-top:10px">
          <button class="btn btn-calc" onclick="calc()">‚úçÔ∏è Í≥ÑÏÇ∞ÌïòÍ∏∞</button>
        </div>

        <!-- Í≥ÑÏÇ∞ÌïòÍ∏∞ Î∞îÎ°ú ÏïÑÎûò Ìï©Í≥Ñ ÏÑ∏Ïï° ÏïÑÏù¥ÏΩò Î∞ïÏä§ -->
        <div class="inline-sum" role="status" aria-live="polite">
          <div class="sum-chip" title="Ìï©Í≥Ñ ÏÑ∏Ïï°">
            <div class="line">
              <span class="label">Ìï©Í≥Ñ ÏÑ∏Ïï°</span>
              <span class="value" id="sumY_inline">-</span>
            </div>
          </div>
        </div>

        <!-- ÏÑ∏Ïï°ÏÇ∞Ï∂ú Ï†ïÎ≥¥ -->
        <div class="break-wrap">
          <details open>
            <summary>ÏÑ∏Ïï°ÏÇ∞Ï∂ú Ï†ïÎ≥¥</summary>
            <table class="table info-table">
              <thead>
                <tr>
                  <th class="th-center">Íµ¨Î∂Ñ</th>
                  <th class="mono th-center">Ïû¨ÏÇ∞ÏÑ∏(Î≥∏ÏÑ∏)</th>
                  <th class="mono th-center">ÎèÑÏãúÏßÄÏó≠Î∂Ñ</th>
                  <th class="mono th-center">ÏßÄÎ∞©ÍµêÏú°ÏÑ∏</th>
                  <th class="mono th-center">Ìï©Í≥Ñ</th>
                </tr>
              </thead>
              <tbody id="tbBreak">
                <tr><td colspan="5" style="text-align:center;color:#555">Í≥ºÏÑ∏ÌëúÏ§Ä ÏûÖÎ†• ÌõÑ ‚ÄòÍ≥ÑÏÇ∞ÌïòÍ∏∞‚ÄôÎ•º ÎàåÎü¨Ï£ºÏÑ∏Ïöî.</td></tr>
              </tbody>
            </table>
          </details>
        </div>
      </div>

      <!-- Í≤∞Í≥º -->
      <div class="card" id="section-result">
        <h2>2. ÏµúÏ¢Ö ÏÑ∏Ïï° <span class="note-inline">‚Äª ÏÑ∏Ïï°Ïù¥ ÏÉÅÏù¥Ìï† Í≤ΩÏö∞ ‚ë†ÏÑ∏Î∂ÄÎã¥ÏÉÅÌïú ‚ë°ÏÑ∏Ïï°Í≥µÏ†ú ‚ë¢Í∞êÎ©¥ Îì± Ï≤¥ÌÅ¨</span></h2>
        <!-- Ìï©Í≥Ñ ÏÑ∏Ïï° Î∞ïÏä§(Î∞òÌè≠ ‚Üí Ï†ÑÏ≤¥Ìè≠ÏúºÎ°ú Î≥ÄÍ≤Ω) -->
        <div class="sum-box half" role="status" aria-live="polite">
          <div>
            <div class="label">Ìï©Í≥Ñ ÏÑ∏Ïï°</div>
            <div class="value" id="sumY_top">-</div>
          </div>
        </div>
        <!-- ÏÑ∏Î™©¬∑Ï¥ùÏÑ∏Ïï° Ìëú -->
        <table class="table result-table">
          <thead><tr><th class="th-center">ÏÑ∏ Î™©</th><th class="mono th-center">Ï¥ùÏÑ∏Ïï°</th></tr></thead>
          <tbody id="tb"><tr><td colspan="2" style="text-align:center;color:#555">Í≥ºÏÑ∏ÌëúÏ§Ä ÏûÖÎ†• ÌõÑ ‚ÄòÍ≥ÑÏÇ∞ÌïòÍ∏∞‚ÄôÎ•º ÎàåÎü¨Ï£ºÏÑ∏Ïöî.</td></tr></tbody>
          <tfoot><tr><th class="big th-center">Ìï©Í≥Ñ ÏÑ∏Ïï°</th><th class="mono sum-amount" id="sumY">-</th></tr></tfoot>
        </table>
      </div>
    </div>

    <!-- ‚úÖ FAQ ÏÑπÏÖò (Ï¥àÍ∏∞: Ï†úÎ™©Îßå Î≥¥ÏûÑ, Ï†úÎ™© ÌÅ¥Î¶≠ Ïãú Î™®Îëê ÌëúÏãú/Ïà®ÍπÄ) -->
    <section class="faq" data-collapsed="1">
      <h2 id="faqHeader" aria-expanded="false" tabindex="0" title="ÌÅ¥Î¶≠/ÏóîÌÑ∞Î°ú Ï†ÑÏ≤¥ ÌéºÏπòÍ∏∞/Ï†ëÍ∏∞"> FAQ </h2>
      <details>
        <summary>1) Ïï± ÏÑ§Ïπò ÌõÑ ÏóÖÎç∞Ïù¥Ìä∏Îäî Ïñ¥ÎñªÍ≤å Ïïå Ïàò ÏûàÎÇòÏöî?</summary>
        <p>ÏÉà Î≤ÑÏ†ÑÏù¥ Î∞∞Ìè¨ÎêòÍ±∞ÎÇò ÏàòÏ†ïÎêòÎ©¥ ÏûêÎèôÏúºÎ°ú Í∞±Ïã†Îê©ÎãàÎã§. Ïï±ÏùÑ ÏÇ≠Ï†ú ÌõÑ Í∞ôÏùÄ ÎßÅÌÅ¨Î°ú Ïû¨ÏÑ§ÏπòÌïòÎäî Î∞©Î≤ïÎèÑ Ï¢ãÏäµÎãàÎã§.</p>
      </details>
      <details>
        <summary>2) ÏÑ∏Î≤ï Î∞è ÏãúÌñâÎ†π Í∞úÏ†ïÎèÑ Î∞òÏòÅÎêòÎÇòÏöî?</summary>
        <p>Í∞úÏ†ïÎ≤ï Î∞è ÏãúÌñâÎ†πÏù¥ Í≥µÌè¨Îêú ÌõÑ Ïó∞ÎèÑÎ≥Ñ Î≤ÑÏ†ÑÏúºÎ°ú Ï†úÍ≥µÌï† ÏòàÏ†ïÏûÖÎãàÎã§.</p>
      </details>
      <details>
        <summary>3) ÎèÑÏãúÏßÄÏó≠Î∂ÑÏùÑ Í≥ºÏÑ∏ Ï†úÏô∏Ìï† Ïàò ÏûàÎÇòÏöî?</summary>
        <p>ÎÑ§, Í∞Å Í≥ºÏÑ∏Ïú†Ìòï Íµ¨Î∂ÑÎ≥Ñ Ï≤¥ÌÅ¨Î∞ïÏä§Î•º Ìï¥Ï†úÌïòÎ©¥ Í≥ºÏÑ∏Ï†úÏô∏ Ï≤òÎ¶¨Î°ú Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÏäµÎãàÎã§.</p>
      </details>
      <details>
        <summary>4) Ïó¨Îü¨ ÌïÑÏßÄÎ•º Ìï©ÏÇ∞Ìï¥ÏÑú Í≥ÑÏÇ∞ Í∞ÄÎä•ÌïúÍ∞ÄÏöî?</summary>
        <p>Ìï©ÏÇ∞ Í≥ºÏÑ∏ÌëúÏ§Ä Í∏àÏï°ÏùÑ ÏßÅÏ†ë ÏûÖÎ†•ÌïòÎ©¥ Îê©ÎãàÎã§.</p>
      </details>
      <details>
        <summary>5) "ÌÜ†ÏßÄ ÏÑ∏Î∂ÄÎã¥ÏÉÅÌïú"Ïù¥ÎûÄ?</summary>
        <p>ÌÜ†ÏßÄ ÏÑ∏Î∂ÄÎã¥ ÏÉÅÌïúÏùÄ ÏûëÎÖÑÏÑ∏Ïï° Í∏∞Ï§ÄÏúºÎ°ú ÏÑ∏Ïï°Ïù¥ 150%Î•º ÎÑòÏßÄ ÏïäÎèÑÎ°ù ÏÉÅÌïúÏùÑ Îëî Í∑úÏ†ïÏûÖÎãàÎã§. Î≥∏ Í≥ÑÏÇ∞Í∏∞ÏóêÎäî ÏÑ∏Î∂ÄÎã¥ ÏÉÅÌïúÏù¥ Ï†ÅÏö©ÎêòÏßÄ ÏïäÏäµÎãàÎã§. ÏÑ∏Î∂ÄÎã¥ ÏÉÅÌïúÏù¥ Ï†ÅÏö©ÎêòÎäî ÌïÑÏßÄÏùò Í≤ΩÏö∞ Î≥ÑÎèÑ ÏàòÍ∏∞ Í≥ÑÏÇ∞Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.</p>
      </details>
      <details>
        <summary>6) Î¨∏ÏùòÍ∞Ä ÏûàÎäî Í≤ΩÏö∞ Ïñ¥ÎîîÏóê ÌïòÎÇòÏöî?</summary>
        <p>Ïï± Í¥ÄÎ†® ÌîºÎìúÎ∞±ÏùÄ Í∞êÏÇ¨Ìûà Î∞õÍ≤†ÏäµÎãàÎã§. Îã§Î•∏ Î¨∏ÏùòÏóê ÎåÄÌïú ÎãµÎ≥ÄÏùÄ Ïñ¥Î†µÏäµÎãàÎã§. <a href="mailto:corny04100@gmail.com">corny04100@gmail.com</a></p>
      </details>
    </section>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    /* ---------- Ïú†Ìã∏ ---------- */
    const $=id=>document.getElementById(id);
    const setText=(id,v)=>{const el=$(id); if(el) el.textContent=v;}
    const setHTML=(id,v)=>{const el=$(id); if(el) el.innerHTML=v;}
    const numOf=id=>Number((($(id)?.value)||'').replace(/,/g,'')||0);
    const floor10=n=>Math.floor(n/10)*10;
    const fmt=n=>(Number.isFinite(n)?Math.floor(n).toLocaleString('ko-KR')+'Ïõê':'-');
    function toast(msg){const t=$('toast'); if(!t) return; t.textContent=msg; t.classList.add('show'); clearTimeout(toast._timer); toast._timer=setTimeout(()=>t.classList.remove('show'),1500);}    

    /* ÏûÖÎ†• Ïà´Ïûê ÏΩ§Îßà */
    document.addEventListener('input',e=>{
      if(e.target.classList.contains('num')){
        let v=e.target.value.replace(/,/g,'').replace(/[^\d]/g,'');
        if(v===''){e.target.value='';return;}
        e.target.value=v.replace(/\B(?=(\d{3})+(?!\d))/g,",");
      }
    });

    /* Î∞îÎ°úÍ∞ÄÍ∏∞ */
    function openLookupNew(){window.open('https://www.realtyprice.kr/notice/town/nfSiteLink.htm','_blank','noopener');}

    /* ---------- ÏÑ∏Ïú®Ìëú ---------- */
    const BRACKETS_SUM = [
      {base:0, rate:0.0020, minus:0},
      {base:50_000_000, rate:0.0030, minus:50_000},
      {base:100_000_000, rate:0.0050, minus:250_000}
    ];
    const BRACKETS_SEP = [
      {base:0, rate:0.0020, minus:0},
      {base:200_000_000, rate:0.0030, minus:200_000},
      {base:1_000_000_000,rate:0.0040, minus:1_200_000}
    ];
    const RATE_SPLIT = { farm:0.0007, golf:0.0400, etc:0.0020 };
    const CITY_RATE = 0.0014; // 0.14%
    const EDU_RATE = 0.20; // Î≥∏ÏÑ∏Ïùò 20%

    // ‚ñº Ïù¥Ï†Ñ ÏÑ†ÌÉù Ïú†ÌòïÏùÑ Í∏∞ÏñµÌïòÏó¨ Ïú†Ìòï Î≥ÄÍ≤Ω Ïãú Î∂ÑÎ¶¨Í≥ºÏÑ∏ ÎèÑÏãúÏßÄÏó≠ Í∏∞Î≥∏Í∞íÏùÑ Í∞ïÏ†ú Î∞òÏòÅ
    window._prevSplitType = window._prevSplitType || null;

    /* Í≥µÏö© Ìï®Ïàò */
    function pickBracket(base, table){
      let cur=table[0];
      for(const b of table){ if(base>=b.base) cur=b; else break; }
      return cur;
    }
    function taxByBracket(base, table){
      if(!(base>0)) return 0;
      const r = pickBracket(base, table);
      return Math.floor(base*r.rate - r.minus);
    }

    /* Íµ¨Î∂ÑÎ≥Ñ ÎèÑÏãúÍ≥ºÏÑ∏ Ï†ÅÏö© ÏÉÅÌÉú (ÏöîÏ≤≠ Î∞òÏòÅ)
       - Î∂ÑÎ¶¨Í≥ºÏÑ∏ Ïú†ÌòïÏù¥ 'farm'Ïù∏ Í≤ΩÏö∞: Ï≤¥ÌÅ¨ Ìï¥Ï†ú(ÎØ∏Ï†ÅÏö©)
       - Î∂ÑÎ¶¨Í≥ºÏÑ∏ Ïú†ÌòïÏù¥ 'golf' ÎòêÎäî 'etc'Ïù∏ Í≤ΩÏö∞: Ï≤¥ÌÅ¨ Ï†ÅÏö© */
    function getCityFlags(splitType, forceDefault=false){
      const sum = document.getElementById('ck_city_sum')?.checked ?? true;
      const sep = document.getElementById('ck_city_sep')?.checked ?? true;
      const defaultMap = { farm:false, golf:true, etc:true };
      let spl;
      if(forceDefault){
        spl = defaultMap[splitType] ?? true;
      }else{
        spl = document.getElementById('ck_city_spl')?.checked ?? (defaultMap[splitType] ?? true);
      }
      return {sum, sep, spl};
    }

    /* ---------- Í≥ÑÏÇ∞ ---------- */
    function calc(){
      const baseSum = numOf('Í≥ºÌëú_Ï¢ÖÌï©');
      const baseSep = numOf('Í≥ºÌëú_Î≥ÑÎèÑ');
      const baseSplit = numOf('Í≥ºÌëú_Î∂ÑÎ¶¨');
      const rawType = ($('Î∂ÑÎ¶¨_Ïú†Ìòï')?.value)||'';
      const splitType = (rawType==='') ? 'none' : rawType;

      // Ïú†Ìòï Î≥ÄÍ≤Ω Ïó¨Î∂Ä ÌåêÎã® ‚Üí Î≥ÄÍ≤Ω Ïãú Î∂ÑÎ¶¨Í≥ºÏÑ∏ ÎèÑÏãúÏßÄÏó≠ Ï≤¥ÌÅ¨Î∞ïÏä§Î•º Ïú†Ìòï Í∏∞Î≥∏Í∞íÏúºÎ°ú Ïû¨ÏÑ§Ï†ï
      const changed = (window._prevSplitType !== splitType);
      const flags = getCityFlags(splitType, changed);

      /* Î≥∏ÏÑ∏ */
      const y_sum = taxByBracket(baseSum, BRACKETS_SUM);
      const y_sep = taxByBracket(baseSep, BRACKETS_SEP);
      const rate = RATE_SPLIT[splitType] || 0;
      const y_spl = Math.floor(baseSplit * rate);
      const y_bon = y_sum + y_sep + y_spl;

      /* ÎèÑÏãúÏßÄÏó≠Î∂Ñ */
      const city_sum = flags.sum ? Math.floor(baseSum * CITY_RATE) : 0;
      const city_sep = flags.sep ? Math.floor(baseSep * CITY_RATE) : 0;
      const city_spl = (rate>0 && flags.spl) ? Math.floor(baseSplit * CITY_RATE) : 0;
      const y_city = city_sum + city_sep + city_spl;

      /* ÏßÄÎ∞©ÍµêÏú°ÏÑ∏ */
      const eduY10 = floor10(Math.floor(y_bon * EDU_RATE));

      /* Ìï©Í≥Ñ */
      const subtotalY10 = floor10(y_bon + y_city);
      const sumY = subtotalY10 + eduY10;

      /* Î≥∏Î¨∏ Í≤∞Í≥º Ìëú */
      const rows=[ ['Ïû¨ÏÇ∞ÏÑ∏(Î≥∏ÏÑ∏)', fmt(y_bon)], ['ÎèÑÏãúÏßÄÏó≠Î∂Ñ', fmt(y_city)], ['ÏßÄÎ∞©ÍµêÏú°ÏÑ∏', fmt(eduY10)] ]
        .map(([n,y])=>`<tr><td class="th-center">${n}</td><td class="mono">${y}</td></tr>`).join('');
      setHTML('tb', rows);
      setText('sumY', fmt(sumY));
      setText('sumY_top', fmt(sumY));
      setText('sumY_inline', fmt(sumY)); // Î≤ÑÌäº ÏïÑÎûò ÏïÑÏù¥ÏΩò Î∞ïÏä§ ÎèôÍ∏∞Ìôî

      /* ‚ñº ÏÑ∏Ïï°ÏÇ∞Ï∂ú Ï†ïÎ≥¥(Í≥ºÏÑ∏Ï≤¥Í≥ÑÎ≥Ñ) */
      const edu_sum10 = floor10(Math.floor(y_sum * EDU_RATE));
      const edu_sep10 = floor10(Math.floor(y_sep * EDU_RATE));
      const edu_spl10 = floor10(Math.floor(y_spl * EDU_RATE));
      const sum_sum10 = floor10(y_sum + city_sum) + edu_sum10;
      const sum_sep10 = floor10(y_sep + city_sep) + edu_sep10;
      const sum_spl10 = floor10(y_spl + city_spl) + edu_spl10;

      const labelSum = `Ï¢ÖÌï©Ìï©ÏÇ∞ <label class="city-apply"><input type="checkbox" id="ck_city_sum" ${flags.sum?'checked':''}> ÎèÑÏãúÏßÄÏó≠</label>`;
      const labelSep = `Î≥ÑÎèÑÌï©ÏÇ∞ <label class="city-apply"><input type="checkbox" id="ck_city_sep" ${flags.sep?'checked':''}> ÎèÑÏãúÏßÄÏó≠</label>`;
      const labelSpl = `Î∂ÑÎ¶¨Í≥ºÏÑ∏ <label class="city-apply"><input type="checkbox" id="ck_city_spl" ${flags.spl?'checked':''}> ÎèÑÏãúÏßÄÏó≠</label>`;

      const breakdownRows = [
        [labelSum, fmt(y_sum), fmt(city_sum), fmt(edu_sum10), fmt(sum_sum10)],
        [labelSep, fmt(y_sep), fmt(city_sep), fmt(edu_sep10), fmt(sum_sep10)],
        [labelSpl, fmt(y_spl), fmt(city_spl), fmt(edu_spl10), fmt(sum_spl10)]
      ].map(([g,bon,city,edu,sum])=>
        `<tr>
          <td class="th-center">${g}</td>
          <td class="mono" style="text-align:right">${bon}</td>
          <td class="mono" style="text-align:right">${city}</td>
          <td class="mono" style="text-align:right">${edu}</td>
          <td class="mono" style="text-align:right">${sum}</td>
        </tr>`
      ).join('');
      setHTML('tbBreak', breakdownRows);
      // Ï≤¥ÌÅ¨Î∞ïÏä§ Î≥ÄÍ≤Ω ÏãúÏóêÎäî Ï¶âÏãú Í≥ÑÏÇ∞ÌïòÏßÄ ÏïäÏäµÎãàÎã§. Î≥ÄÍ≤Ω ÌõÑ 'Í≥ÑÏÇ∞ÌïòÍ∏∞' Î≤ÑÌäºÏùÑ ÎàåÎü¨ Î∞òÏòÅÌï©ÎãàÎã§.

      // ÌòÑÏû¨ Î∂ÑÎ¶¨Í≥ºÏÑ∏ Ïú†Ìòï Ï†ÄÏû• (Îã§Ïùå Ìò∏Ï∂úÏóêÏÑú Î≥ÄÍ≤Ω Ïó¨Î∂Ä ÌåêÎã®)
      window._prevSplitType = splitType;
    }

    /* Ïù∏ÏáÑ/Ï†ÄÏû• */
    function openPrint(){ window.print(); }

    /* FAQ: Ï≤´ ÌôîÎ©¥Ïóî Ï†úÎ™©Îßå Î≥¥Ïù¥Í≥†, Ï†úÎ™©ÏùÑ ÌÑ∞Ïπò/ÌÅ¥Î¶≠ÌïòÎ©¥ Ï†ÑÏ≤¥ ÌëúÏãú/Ïà®ÍπÄ */
    (function(){
      const faq = document.querySelector('.faq');
      const header = document.getElementById('faqHeader');
      if(!faq || !header) return;
      // Ï¥àÍ∏∞: Ï†ÑÏ≤¥ Ïà®ÍπÄ + details Îã´Ìûò
      faq.dataset.collapsed = '1';
      faq.querySelectorAll('details').forEach(d => d.open = false);
      header.setAttribute('aria-expanded', 'false');

      function showAll(){
        faq.dataset.collapsed = '0';
        faq.querySelectorAll('details').forEach(d => d.open = true);
        header.setAttribute('aria-expanded', 'true');
      }
      function hideAll(){
        faq.dataset.collapsed = '1';
        faq.querySelectorAll('details').forEach(d => d.open = false);
        header.setAttribute('aria-expanded', 'false');
      }
      function toggleAll(){ (faq.dataset.collapsed === '1') ? showAll() : hideAll(); }

      header.addEventListener('click', toggleAll);
      header.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggleAll(); } });
    })();
  </script>

  <!-- PWA: ÏÑúÎπÑÏä§ÏõåÏª§ Îì±Î°ù + ÏÑ§Ïπò Î≤ÑÌäº ÎèôÏûë -->
  <script>
    (function(){
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js').catch(console.error);
      }
      // Ïï± ÏÑ§Ïπò Î≤ÑÌäº
      let deferredPrompt;
      const btn = document.getElementById('install');
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        if (btn) btn.style.display = 'inline-flex';
      });
      if (btn) {
        btn.addEventListener('click', async () => {
          if (!deferredPrompt) return;
          btn.disabled = true;
          deferredPrompt.prompt();
          await deferredPrompt.userChoice;
          deferredPrompt = null;
          btn.style.display = 'none';
        });
      }
      const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
      if (isStandalone && btn) btn.style.display = 'none';
    })();
  </script>
</body>
</html>
.
